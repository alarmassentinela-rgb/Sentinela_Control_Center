# Session Log - 2025-12-27

**User:** dell
**Date:** Saturday, December 27, 2025

## Activities
- Session started.
- **GitHub Access:** Configured SSH access for user `alarmassentinela-rgb`.
  - Keys: `.ssh/id_ed25519` (local), `/root/.ssh/id_ed25519_github` (secure system path).
  - Config: Updated `.ssh/config` to include `github.com`.
  - Status: Connection verified successfully.
- **Server Diagnosis (gemini-local):**
  - **OS:** Ubuntu 24.04.3 LTS.
  - **Existing Services:**
    - **Odoo 17:** Running natively (Python) on port 8069. DB: `erp_sentinela_v2`.
    - **Nginx:** Reverse proxy handling SSL for `odoo.sentinela.mx` and `n8n.sentinela.mx`.
    - **n8n:** Running in Docker (port 5678).
    - **PostgreSQL:** Port 5432.
  - **MasAdmin Status:** No trace of "MasAdmin" files or databases found on this server. Concluded source data resides elsewhere (local Windows machine or external server).
- **Critical Instruction Saved:** Strict prohibition on modifying existing installations (Odoo 17, Postgres, Routers) without explicit authorization.
- **Odoo 18 Deployment:**
  - **Strategy:** Docker container isolated (`odoo:18` + `postgres:16`).
  - **Path:** `/home/egarza/odoo18-migration`.
  - **Ports:** Odoo on `8070`, Postgres on `5433`.
  - **Status:** Deployed and running. Accessible at `http://192.168.3.2:8070`.
- **Custom Module Development: `sentinela_subscriptions`**
  - **Goal:** Manage recurring billing, service contracts (Internet/Alarms), forced terms, and equipment.
  - **Features Implemented:**
    - `sentinela.subscription` model: Recurring logic, technical status (hooks for Mikrotik), financial status.
    - Automated Billing (Cron): Generates invoices daily for due subscriptions.
    - Equipment Management: Tracking ownership (Leasing/Comodato).
    - Penalties: Late fees and reconnection charges products created.
  - **Fixes Applied:**
    - Updated `__manifest__.py` dependencies (added `mail`).
    - Fixed XML compatibility for Odoo 18 (removed `numbercall` and `doall` from cron).
    - Fixed Python/XML view mismatch (`invoice_grouping_method` related field).
    - Created missing data files (`product_data.xml`).
  - **Status:** Module v8 successfully installed and active on the server.
- **Data Migration (Phase 1):**
  - **Source:** CSV export from MasAdmin (`gace-clientes-187.csv`, 2000 records).
  - **Process:** Created Python script to clean headers (`*RazonSocial` -> `name`) and map columns to Odoo format.
  - **Result:** Generated `odoo_primeros2000.csv` in user's Downloads folder ready for import.

## Pending Tasks
- Import the 2000 clients into Odoo Contacts.
- Develop the connection between Odoo and Mikrotik (using the hooks provided).
- Configure the specific subscription plans (products) in Odoo.